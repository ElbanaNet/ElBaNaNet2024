/* Bookmark Widget js */
getid('header-icon').insertAdjacentHTML('beforeend', '<div class="cBkPs"><input class="bkmI hidden" id="offBkm" type="checkbox"/><div class="wBkm sl"><div class="bkmS fixLs"><div class="bkmH fixH fixT" data-text="' + PuSet.bookmark.bmTitle + '"><label aria-label="' + PuSet.bookmark.closeText + '" class="c cl" for="offBkm"></label></div><div id="dBmPs" class="bkmC"></div></div></div><label class="bkmCls" for="offBkm"></label></div>');
const LS_BM_PS = 'Bookmark_Post';
let objBmPs = {},
  giBmPs = Pu.gLS(LS_BM_PS);
function nBkmPs() {
  getid('dBmPs').innerHTML = '<div class="n">' + PuSet.bookmark.noBmIcon + '<p>' + PuSet.bookmark.noBmMes + '</p><a class="button" href="' + PuSet.bookmark.noBmLink + '">' + PuSet.bookmark.noBmAll + '</a></div>';
}
function gBmPs(t, n) {
  var e = 537;
  var x = n.id,
    B = n.title,
    e = n[P(-547, -e)],
    n = n.link;
  null !== getid('dBmPs') && (getid('dBmPs').innerHTML += '<div class="item" id="bkm' + x + '"><div class="pThmb"><a class="thmb" href="' + n + '"><div class="bkmImg" style="background-image:url(\'' + e + '\');"></div></a></div><div class="itmTtl"><a href="' + n + '">' + B + '</a></div><div class="del" onclick="delBmPs(\'' + x + '\')">' + PuSet.bookmark.delIcon + '</div></div>'), qSell('.bmPs[bm-id="' + x + '"]').forEach(t => {
    t.classList.add("a");
  });
}
function rBmPs() {
  if (getid('dBmPs').innerHTML = "", Pu.gLS(LS_BM_PS)) {
    for (var o in objBmPs = JSON.parse(Pu.gLS(LS_BM_PS)), objBmPs) gBmPs(o, objBmPs[o]);
    var c = Object.keys(objBmPs).length;
    0 < c ? (qSel(".tBkmt").setAttribute('data-text', c), qSel('.tBkmt').classList.remove("n")) : (qSel(".tBkmt").classList.add("n"), nBkmPs());
  }
}
function synBmPs(t, n, e, s, r) {
  switch (t) {
    case 'ADD':
    case 'UPD':
      Pu.gLS(LS_BM_PS) && (objBmPs = JSON.parse(Pu.gLS(LS_BM_PS)));
      var m = {
        id: n,
        title: e,
        image: s,
        link: r
      };
      objBmPs[m.id] = m;
      break;
    case 'DEL':
      delete objBmPs[n], qSell('.bmPs[bm-id="' + n + '"]').forEach(t => {
        t.classList.remove("a");
      });
  }
  Pu.sLS(LS_BM_PS, JSON.stringify(objBmPs)), rBmPs();
}
function delBmPs(t) {
  Pu.gLS(LS_BM_PS) && (objBmPs = JSON.parse(Pu.gLS(LS_BM_PS)), null != objBmPs[t] && (getid("bkm" + t).classList.add("d"), setTimeout(function () {
    synBmPs('DEL', t), toastNotif(PuSet.bookmark.removedNtf);
  }, 1e3)));
}
null != typeof blogID && null != typeof licenseKey && ((giBmPs ? rBmPs : nBkmPs)(), qSell('.bmPs').forEach(c => {
  c.addEventListener('click', t => {
    var r = c.getAttribute("bm-id"),
      i = c.getAttribute('bm-ttl'),
      a = c.getAttribute("bm-img"),
      u = c.getAttribute('bm-url');
    Pu.gLS(LS_BM_PS) ? (objBmPs = JSON.parse(Pu.gLS(LS_BM_PS)), null == objBmPs[r] ? (synBmPs('ADD', r, i, a, u), toastNotif(PuSet.bookmark.addedNtf)) : (synBmPs('DEL', r), toastNotif(PuSet.bookmark.removedNtf))) : (synBmPs('ADD', r, i, a, u), toastNotif(PuSet.bookmark.addedNtf));
  });
}));
function bkMrk() {
  qSell('.bmPs').forEach(t => {
    t.replaceWith(t.cloneNode(true));
  });
  let s = {};
  if (Pu.gLS('Bookmark_Post')) for (var r in s = JSON.parse(Pu.gLS('Bookmark_Post')), s) {
    var e = '.bmPs[bm-id="' + s[r].id + '"]';
    qSell(e).forEach(t => {
      t.classList.add("a");
    });
  }
  qSell('.bmPs').forEach(a => {
    a.addEventListener("click", t => {
      var e = a.getAttribute("bm-id"),
        o = a.getAttribute("bm-ttl"),
        u = a.getAttribute('bm-img'),
        c = a.getAttribute('bm-url');
      Pu.gLS("Bookmark_Post") ? (s = JSON.parse(Pu.gLS("Bookmark_Post")), null == s[e] ? (synBmPs("ADD", e, o, u, c), toastNotif(PuSet.bookmark.addedNtf)) : (synBmPs("DEL", e), toastNotif(PuSet.bookmark.removedNtf))) : (synBmPs('ADD', e, o, u, c), toastNotif(PuSet.bookmark.addedNtf));
    });
  });
}
PuSet['license']['key'];